#!/usr/bin/env bash

# job template binding variables

# job name & index of this VM within cluster
# e.g. JOB_NAME=redis, JOB_INDEX=0
export NAME='<%= name %>'
export JOB_INDEX='<%= index %>'
# full job name, like redis/0 or webapp/3
export JOB_FULL="$NAME/$JOB_INDEX"

export DEPLOYMENT_NAME="<%= spec.deployment %>"
export BIND_ADDR="<%= spec.networks.send(spec.networks.methods(false).first).ip %>"
export BIND_PORT="<%= p('graphite_api.port') %>"
export WORKERS="<%= p('graphite_api.workers') %>"
export THREADS="<%= p('graphite_api.threads') %>"
export GRAPHITE_API_CONFIG="${JOB_DIR}/config/graphite-api.yaml"

